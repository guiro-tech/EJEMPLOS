<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>El Güiro Tech — Diapositivas navegables (FIX + Portafolio)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --shadow:0 28px 80px rgba(0,0,0,.45);
      --ease:cubic-bezier(.22,1,.36,1);
      --radius:22px;
      --ui-bg:rgba(10,12,16,.6);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      overflow:hidden; background:#0b0f14;
    }
    a{color:inherit;text-decoration:none}

    /* ===== BARRA INFERIOR ===== */
    header{
      position:fixed; inset:auto 0 0 0;
      z-index:30; background:linear-gradient(180deg, rgba(2,6,12,0), var(--ui-bg));
      -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
      padding:10px 12px; color:#e5e7eb;
    }
    .toolbar{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      max-width:1100px; margin:0 auto;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800}
    .brand img{width:26px;height:26px;border-radius:8px;border:1px solid rgba(255,255,255,.25);object-fit:cover}
    .btn{
      background:#111827; color:#e5e7eb; border:1px solid rgba(255,255,255,.12);
      padding:8px 10px; border-radius:10px; font-weight:600; cursor:pointer;
      transition:background .15s ease, transform .1s ease;
    }
    .btn:hover{background:#1f2937; transform:translateY(-1px)}
    .sep{flex:1}
    .dots{display:flex; gap:6px; align-items:center}
    .dot{width:9px; height:9px; border-radius:999px; background:rgba(255,255,255,.25); cursor:pointer; transition:transform .15s ease, background .15s ease}
    .dot.active{background:#fff; transform:scale(1.15)}
    .progress{height:8px; min-width:160px; background:rgba(255,255,255,.13); border-radius:999px; overflow:hidden; cursor:pointer}
    .progress > span{display:block; height:100%; width:0%; background:linear-gradient(90deg,#7c3aed,#22d3ee,#f59e0b); transition:width .25s var(--ease)}
    .counter{font-variant-numeric:tabular-nums; min-width:70px; text-align:right}

    /* ===== DECK / TRACK / SLIDE ===== */
    .deck{
      position:fixed; inset:0 0 64px 0;     /* deja espacio para la barra inferior */
      overflow:hidden;
      display:block;                         /* <-- FIX: nada de grid aquí */
    }
    .track{
      width:100%; height:100%;
      display:flex;
      will-change:transform;
      transition:transform .42s var(--ease);
      transform:translate3d(0,0,0);
    }
    .slide{
      position:relative; flex:0 0 100%; height:100%;
      display:flex; align-items:center; justify-content:center;
      padding:54px 64px;
      background:var(--bg, #0e1623);
      color:var(--fg, #fff);
      box-shadow:var(--shadow); isolation:isolate;
    }
    .card{
      width:min(1000px, 92vw);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.18);
      border-radius:var(--radius);
      padding:34px 36px;
      backdrop-filter:saturate(1.1) blur(6px);
      color:inherit;
    }
    .card h1{font-size:clamp(32px,5.2vw,72px); line-height:1.02; letter-spacing:-.02em; margin:0 0 8px 0}
    .card h2{font-size:clamp(24px,3.6vw,44px); margin:0 0 6px 0}
    .lead{font-size:clamp(16px,2.1vw,22px); opacity:.9; margin-bottom:10px}
    .list{display:grid; gap:8px; margin:12px 0 0 0; padding:0; list-style:none}
    .list li{position:relative; padding-left:22px}
    .list li::before{
      content:""; position:absolute; left:0; top:.6em; width:10px; height:10px; border-radius:999px;
      background:var(--accent, #fff);
      box-shadow:0 0 0 2px rgba(0,0,0,.15) inset;
    }
    .cta{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn-cta{
      border:2px solid var(--accent,#fff); color:var(--fg,#fff); background:transparent;
      padding:10px 14px; border-radius:12px; font-weight:800; cursor:pointer;
      transition:transform .12s ease, background .15s ease, color .15s ease;
    }
    .btn-cta:hover{transform:translateY(-1px); background:var(--accent); color:var(--fg-contrast,#000)}

    .slide::before{
      content:""; position:absolute; inset:-30% -10% auto -10%; height:70%;
      background:
        radial-gradient(640px 360px at 40% 20%, color-mix(in oklab, var(--accent) 35%, transparent), transparent 60%),
        radial-gradient(620px 340px at 70% 0%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 60%);
      pointer-events:none; z-index:0; filter:blur(10px);
    }

    /* ===== GRID DE PORTAFOLIO (CARDS) ===== */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(230px, 1fr));
      gap:14px; margin-top:14px;
    }
    .p-card{
      position:relative; overflow:hidden; border-radius:16px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.15);
      display:flex; flex-direction:column; min-height:240px;
      transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .p-card:hover{ transform:translateY(-2px); box-shadow:0 12px 40px rgba(0,0,0,.35); border-color:rgba(255,255,255,.25); }
    .p-thumb{
      height:120px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.15)),
        radial-gradient(240px 160px at 20% 10%, color-mix(in oklab, var(--accent, #22d3ee) 50%, transparent), transparent 60%),
        radial-gradient(260px 180px at 80% -10%, color-mix(in oklab, var(--accent, #22d3ee) 35%, transparent), transparent 60%),
        rgba(255,255,255,.04);
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .p-body{padding:12px 14px; display:flex; flex-direction:column; gap:8px; flex:1}
    .p-title{font-weight:800; letter-spacing:-.01em}
    .p-tags{display:flex; flex-wrap:wrap; gap:6px; opacity:.9}
    .tag{
      font-size:.82rem; padding:4px 8px; border-radius:999px;
      border:1px solid rgba(255,255,255,.2);
      background:rgba(255,255,255,.05)
    }
    .p-actions{margin-top:auto; display:flex; gap:8px; flex-wrap:wrap}
    .btn-mini{
      font-size:.9rem; border:1.5px solid var(--accent,#22d3ee);
      padding:8px 10px; border-radius:10px; background:transparent; color:inherit; cursor:pointer;
    }
    .btn-mini:hover{background:var(--accent,#22d3ee); color:var(--fg-contrast,#000)}

    /* Toast simulación */
    .toast{
      position:fixed; left:50%; bottom:82px; transform:translateX(-50%) translateY(10px);
      background:rgba(15,23,42,.98); color:#fff; border:1px solid rgba(255,255,255,.12);
      padding:10px 14px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.35);
      opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease; z-index:40; font-size:.95rem
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
    .toast .mini{display:block;color:#94a3b8;font-size:.82rem;margin-top:2px}

    /* Print: cada slide = página */
    @media print{
      header{display:none}
      .deck{position:static; inset:auto; height:auto}
      .track{display:block; transform:none !important}
      .slide{height:auto; box-shadow:none; page-break-after:always}
      .card{backdrop-filter:none}
    }
  </style>
</head>
<body>
  <main class="deck" id="deck">
    <div class="track" id="track">
      <!-- INICIO -->
      <section class="slide" data-bg="#0e1623" data-title="Inicio">
        <div class="card">
          <h1>Webs & Sistemas <span style="background:linear-gradient(90deg,currentColor, var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent">que venden</span></h1>
          <p class="lead">Diapositivas navegables. Secuencia o salto por botones. Contraste automático por fondo.</p>
          <ul class="list">
            <li>← → y swipe “a dedo”</li>
            <li>Botones: Inicio, Servicios, <strong>Portafolio</strong>, Contáctanos</li>
            <li>Progreso con seek, puntos, Play/Pausa</li>
          </ul>
          <div class="cta">
            <button class="btn-cta goto" data-goto="servicios">Ver Servicios</button>
            <button class="btn-cta goto" data-goto="contacto">Contáctanos</button>
          </div>
        </div>
      </section>

      <!-- SERVICIOS -->
      <section class="slide" data-bg="#124c2e" data-title="Servicios">
        <div class="card">
          <h2>Servicios</h2>
          <p class="lead">Paquetes claros, sin paja.</p>
          <ul class="list">
            <li>Landing enfocada a conversión</li>
            <li>Corporativo 3–5 secciones</li>
            <li>E-commerce lite + checkout</li>
            <li>Integraciones: pagos, banca, ERP</li>
          </ul>
          <div class="cta">
            <button class="btn-cta goto" data-goto="portafolio">Ver Portafolio</button>
          </div>
        </div>
      </section>

      <!-- PORTAFOLIO (antes: Productos) -->
      <section class="slide" data-bg="#4a1e6a" data-title="Portafolio">
        <div class="card">
          <h2>Portafolio</h2>
          <p class="lead">Algunos trabajos listos para lucir y convencer al cliente.</p>

          <div class="grid">
            <article class="p-card" style="--accent:#22d3ee">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">Landing Restaurante</div>
                <div class="p-tags">
                  <span class="tag">SEO</span><span class="tag">Reservas</span><span class="tag">WhatsApp</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/restaurante">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>

            <article class="p-card" style="--accent:#f59e0b">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">Sitio Corporativo PyME</div>
                <div class="p-tags">
                  <span class="tag">3–5 secciones</span><span class="tag">Velocidad</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/pyme">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>

            <article class="p-card" style="--accent:#7c3aed">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">E-commerce Lite</div>
                <div class="p-tags">
                  <span class="tag">Catálogo</span><span class="tag">Checkout</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/ecommerce">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>

            <article class="p-card" style="--accent:#10b981">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">Blog con SEO</div>
                <div class="p-tags">
                  <span class="tag">Artículos</span><span class="tag">OpenGraph</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/blog">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>

            <article class="p-card" style="--accent:#ef4444">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">Reservas + Recordatorios</div>
                <div class="p-tags">
                  <span class="tag">Calendario</span><span class="tag">Correo/SMS</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/reservas">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>

            <article class="p-card" style="--accent:#06b6d4">
              <div class="p-thumb"></div>
              <div class="p-body">
                <div class="p-title">Mini-CRM</div>
                <div class="p-tags">
                  <span class="tag">Leads</span><span class="tag">WhatsApp</span>
                </div>
                <div class="p-actions">
                  <a class="btn-mini sim" href="https://example.com/demo/crm">Ver demo</a>
                  <button class="btn-mini goto" data-goto="contacto">Cotizar</button>
                </div>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- CONTACTO -->
      <section class="slide" data-bg="#7c1a1a" data-title="Contáctanos">
        <div class="card">
          <h2>Contáctanos</h2>
          <p class="lead">Enlaces en modo simulación (no salen del sitio).</p>
          <ul class="list">
            <li><a href="https://wa.me/50250113244" class="sim">WhatsApp: +502 5011 3244</a></li>
            <li><a href="mailto:contacto@elguirotech.com" class="sim">contacto@elguirotech.com</a></li>
            <li><a href="https://www.facebook.com/people/El-G%C3%BCiro-Tech/61556541214972/" class="sim">Facebook</a></li>
          </ul>
          <div class="cta">
            <button class="btn-cta goto" data-goto="inicio">Volver al Inicio</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Controles -->
  <header>
    <div class="toolbar">
      <div class="brand">
        <img src="Imagenes/Logo.jpeg" alt="Logo El Güiro Tech" />
        <span>El Güiro Tech</span>
      </div>

      <button class="btn jump" data-to="inicio">Inicio</button>
      <button class="btn jump" data-to="servicios">Servicios</button>
      <button class="btn jump" data-to="portafolio">Portafolio</button>
      <button class="btn jump" data-to="contacto">Contáctanos</button>

      <div class="sep"></div>

      <button class="btn" id="prevBtn" title="Anterior (←)">⟵ Prev</button>
      <button class="btn" id="nextBtn" title="Siguiente (→)">Next ⟶</button>
      <button class="btn" id="playBtn" title="Reproducir/Pausa (P)">▶️ Play</button>

      <div class="dots" id="dots"></div>
      <div class="progress" id="progress"><span id="bar"></span></div>
      <div class="counter"><span id="curr">1</span>/<span id="total">4</span></div>
    </div>
  </header>

  <!-- Toast simulación -->
  <div class="toast" id="toast">
    <strong>Simulación:</strong> abriría <span class="mini" id="toast-url"></span>
  </div>

  <script>
    const $ = (q,root=document)=>root.querySelector(q);
    const $$ = (q,root=document)=>[...root.querySelectorAll(q)];

    const deck = $('#deck');
    const track = $('#track');
    const slides = $$('.slide', track);
    const total = slides.length;
    const nameToIndex = { inicio:0, servicios:1, portafolio:2, contacto:3 };

    let idx = 0;
    let startX=0, curX=0, dragging=false, viewportW=0, velocity=0, lastT=0, lastX=0;
    let autoTimer=null, isAuto=false;

    // ---- Contraste automático por slide
    function hexToRgb(hex){
      const m = (hex||'').replace('#','').match(/^([0-9a-f]{6}|[0-9a-f]{3})$/i);
      if(!m) return {r:14,g:22,b:35};
      let h = m[1];
      if(h.length===3){ h = h.split('').map(c=>c+c).join(''); }
      const num = parseInt(h,16);
      return { r:(num>>16)&255, g:(num>>8)&255, b:(num)&255 };
    }
    function luminance({r,g,b}){
      const srgb = [r,g,b].map(v=>v/255).map(v=>v<=0.03928? v/12.92 : Math.pow((v+0.055)/1.055, 2.4));
      return 0.2126*srgb[0] + 0.7152*srgb[1] + 0.0722*srgb[2];
    }
    function invert({r,g,b}){ return {r:255-r, g:255-g, b:255-b}; }
    function rgbStr({r,g,b}){ return `rgb(${r}, ${g}, ${b})`; }
    function applyTheme(slide){
      const bgHex = slide.dataset.bg || '#0e1623';
      const rgb = hexToRgb(bgHex);
      const L = luminance(rgb);
      const fg = (L > 0.5) ? {r:0,g:0,b:0} : {r:255,g:255,b:255};
      const acc = invert(rgb);
      slide.style.setProperty('--bg', bgHex);
      slide.style.setProperty('--fg', rgbStr(fg));
      slide.style.setProperty('--accent', rgbStr(acc));
      const Lacc = luminance(acc);
      slide.style.setProperty('--fg-contrast', (Lacc>0.5)?'rgb(0,0,0)':'rgb(255,255,255)');
    }
    slides.forEach(applyTheme);

    // ---- UI básica
    $('#total').textContent = total;
    const dotsWrap = $('#dots');
    slides.forEach((s,i)=>{
      const d = document.createElement('div');
      d.className = 'dot' + (i===0?' active':'');
      d.title = s.dataset.title || `Slide ${i+1}`;
      d.addEventListener('click', ()=>go(i));
      dotsWrap.appendChild(d);
    });
    function updateDots(){ $$('.dot', dotsWrap).forEach((d,i)=>d.classList.toggle('active', i===idx)); }

    // ---- Medir viewport y mover (FIX: usar ancho de .deck)
    function measure(){ viewportW = deck.getBoundingClientRect().width; }
    function updateTransform(instant=false){
      measure();
      track.style.transition = instant ? 'none' : 'transform .42s var(--ease)';
      track.style.transform = `translate3d(${-idx * viewportW}px,0,0)`;
      $('#curr').textContent = idx+1;
      $('#bar').style.width = ((idx+1)/total*100)+'%';
      updateDots();
      location.hash = 's'+(idx+1);
      document.title = `(${idx+1}/${total}) ${slides[idx].dataset.title||'Slide'} — El Güiro Tech`;
    }
    window.addEventListener('resize', ()=>updateTransform(true));
    requestAnimationFrame(()=>updateTransform(true));

    function go(n, instant=false){
      idx = Math.max(0, Math.min(total-1, n));
      updateTransform(instant);
    }
    function next(){ if(idx < total-1){ go(idx+1); } else { stopAuto(); } }
    function prev(){ if(idx > 0){ go(idx-1); } }

    // ---- Drag “a dedo” con snap
    function onDown(e){
      if(dragging) return;
      dragging = true;
      measure();
      startX = (e.touches?e.touches[0].clientX:e.clientX);
      curX = startX; lastX = startX; lastT = performance.now();
      track.style.transition = 'none';
      window.addEventListener('mousemove', onMove, {passive:false});
      window.addEventListener('mouseup', onUp, {once:true});
      window.addEventListener('touchmove', onMove, {passive:false});
      window.addEventListener('touchend', onUp, {once:true});
    }
    function onMove(e){
      if(!dragging) return;
      const x = (e.touches?e.touches[0].clientX:e.clientX);
      curX = x;
      const dx = x - startX;
      const base = -idx * viewportW;
      track.style.transform = `translate3d(${base + dx}px,0,0)`;
      const now = performance.now(); const dt = now - lastT;
      if(dt>16){ velocity = (x - lastX) / dt; lastX = x; lastT = now; }
      e.preventDefault();
    }
    function onUp(){
      if(!dragging) return;
      dragging=false;
      const dx = curX - startX;
      const fast = Math.abs(velocity) > 0.5;
      const threshold = viewportW * 0.18;
      if(dx < -threshold || (fast && dx < -10)){ next(); }
      else if(dx > threshold || (fast && dx > 10)){ prev(); }
      else { updateTransform(); }
    }
    track.addEventListener('mousedown', onDown);
    track.addEventListener('touchstart', onDown, {passive:true});

    // ---- Teclado
    document.addEventListener('keydown', (e)=>{
      switch(e.key){
        case 'ArrowRight': case 'PageDown': case ' ':
          e.preventDefault(); next(); break;
        case 'ArrowLeft': case 'PageUp':
          e.preventDefault(); prev(); break;
        case 'Home': go(0); break;
        case 'End': go(total-1); break;
        case 'p': case 'P': toggleAuto(); break;
      }
    });

    // ---- Progreso con seek
    const progress = $('#progress');
    progress.addEventListener('click', (e)=>{
      const r = progress.getBoundingClientRect();
      const pct = Math.min(1, Math.max(0, (e.clientX - r.left)/r.width));
      const target = Math.max(0, Math.min(total-1, Math.round(pct*(total-1))));
      go(target);
    });

    // ---- Play/Pausa
    $('#nextBtn').addEventListener('click', next);
    $('#prevBtn').addEventListener('click', prev);
    function startAuto(){
      stopAuto();
      isAuto = true;
      $('#playBtn').textContent = '⏸️ Pausa';
      autoTimer = setInterval(()=>{ if(idx < total-1) next(); else stopAuto(); }, 3000);
    }
    function stopAuto(){
      isAuto = false; $('#playBtn').textContent = '▶️ Play';
      if(autoTimer) clearInterval(autoTimer); autoTimer=null;
    }
    function toggleAuto(){ isAuto ? stopAuto() : startAuto(); }
    $('#playBtn').addEventListener('click', toggleAuto);

    // ---- Saltos directos
    $$('.jump').forEach(b=>b.addEventListener('click', ()=>{
      const to = b.dataset.to;
      if(to in nameToIndex) go(nameToIndex[to]);
    }));
    $$('.goto').forEach(btn=>btn.addEventListener('click', ()=>{
      const to = btn.dataset.goto;
      if(to in nameToIndex) go(nameToIndex[to]);
    }));

    // ---- Hash inicial (#sN)
    (function bootFromHash(){
      const m = String(location.hash||'').match(/s(\d+)/i);
      if(m){ const n = parseInt(m[1],10)-1; if(n>=0 && n<total){ go(n, true); } }
      else { updateTransform(true); }
    })();

    // ---- Simulación de enlaces externos
    const toast = $('#toast'), toastUrl = $('#toast-url');
    function showToast(url){
      toastUrl.textContent = url;
      toast.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toast.classList.remove('show'), 2200);
    }
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a.sim'); if(!a) return;
      e.preventDefault();
      showToast(a.getAttribute('href')||'');
    });
  </script>
</body>
</html>
